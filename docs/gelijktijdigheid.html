<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl" xml:lang="nl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martijn Eenink">

<title>Gelijktijdigheidsanalyse LPZ stops</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="gelijktijdigheid_files/libs/clipboard/clipboard.min.js"></script>
<script src="gelijktijdigheid_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="gelijktijdigheid_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="gelijktijdigheid_files/libs/quarto-html/popper.min.js"></script>
<script src="gelijktijdigheid_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="gelijktijdigheid_files/libs/quarto-html/anchor.min.js"></script>
<link href="gelijktijdigheid_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="gelijktijdigheid_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="gelijktijdigheid_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="gelijktijdigheid_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="gelijktijdigheid_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Inhoudsopgave</h2>
   
  <ul>
  <li><a href="#inleiding" id="toc-inleiding" class="nav-link active" data-scroll-target="#inleiding">Inleiding</a>
  <ul class="collapse">
  <li><a href="#begrippen-episodes-en-splits" id="toc-begrippen-episodes-en-splits" class="nav-link" data-scroll-target="#begrippen-episodes-en-splits">Begrippen: episodes en splits</a></li>
  <li><a href="#voorbeeld-in-tabelvorm" id="toc-voorbeeld-in-tabelvorm" class="nav-link" data-scroll-target="#voorbeeld-in-tabelvorm">Voorbeeld in tabelvorm</a></li>
  </ul></li>
  <li><a href="#voorbeeldanalyse" id="toc-voorbeeldanalyse" class="nav-link" data-scroll-target="#voorbeeldanalyse">Voorbeeldanalyse</a>
  <ul class="collapse">
  <li><a href="#stap-1-voorbereiding" id="toc-stap-1-voorbereiding" class="nav-link" data-scroll-target="#stap-1-voorbereiding">Stap 1: voorbereiding</a></li>
  <li><a href="#stap-2-intervallen-definiëren" id="toc-stap-2-intervallen-definiëren" class="nav-link" data-scroll-target="#stap-2-intervallen-definiëren">Stap 2: intervallen definiëren</a></li>
  <li><a href="#stap-3-identificeren-van-episodes-en-splits" id="toc-stap-3-identificeren-van-episodes-en-splits" class="nav-link" data-scroll-target="#stap-3-identificeren-van-episodes-en-splits">Stap 3: identificeren van episodes en splits</a></li>
  <li><a href="#stap-4-converteren-naar-een-tabel-op-basis-van-splits" id="toc-stap-4-converteren-naar-een-tabel-op-basis-van-splits" class="nav-link" data-scroll-target="#stap-4-converteren-naar-een-tabel-op-basis-van-splits">Stap 4: converteren naar een tabel op basis van splits</a></li>
  <li><a href="#stap-5-inzoomen-op-gelijktijdige-splits" id="toc-stap-5-inzoomen-op-gelijktijdige-splits" class="nav-link" data-scroll-target="#stap-5-inzoomen-op-gelijktijdige-splits">Stap 5: inzoomen op gelijktijdige splits</a></li>
  <li><a href="#stap-6-samenvatten-resultaten" id="toc-stap-6-samenvatten-resultaten" class="nav-link" data-scroll-target="#stap-6-samenvatten-resultaten">Stap 6: samenvatten resultaten</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Gelijktijdigheidsanalyse LPZ stops</h1>
<p class="subtitle lead">Met R Tidyverse en het ivs package</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur</div>
    <div class="quarto-title-meta-contents">
             <p>Martijn Eenink </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Publicatiedatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">27 augustus 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="inleiding" class="level1">
<h1>Inleiding</h1>
<p>Dit document bevat uitleg over de methode die Netwerkbureau AZO gebruikt voor het analyseren van gelijktijdigheid van in LPZ afgekondigde presentatiestops.</p>
<p>We doen dit aan de hand van een fictief voorbeeld, waarbij er gedurende een middag door drie verschillende ziekenhuizen presentatiestops worden afgekondigd, die elkaar deels overlappen.</p>
<section id="begrippen-episodes-en-splits" class="level2">
<h2 class="anchored" data-anchor-id="begrippen-episodes-en-splits">Begrippen: episodes en splits</h2>
<p>De tijdlijn voor ons fictieve voorbeeld is als volgt:</p>
<p><img src="images/tijdlijn%20kaal.png" class="img-fluid"></p>
<p>We zien dat er twee clusters van deels overlappende stops zijn. Een in de eerst helft van de middag, waarbij alledrie de ziekenhuizen betrokken zijn. En een aan het eind van de middag, waarbij alleen Ziekenhuis B en C zijn betrokken. We noemen dit soort clusters <em>episodes</em>.</p>
<p>Ook zien we dat de intervallen van de individuele presentatiestops kunnen worden uitgeplitst naar subintervallen al naar gelang er in een, twee, of drie ziekenhuizen een stop gaande is. We noemen deze subintervallen <em>splits</em>.</p>
<p>We identificeren in ons voorbeeld 2 episodes en 6 splits:</p>
<p><img src="images/tijdlijn%20geannoteerd.png" class="img-fluid"></p>
<p>Een gelijktijdigheidsanalyse komt neer op:</p>
<ol type="1">
<li>het identificeren van de episodes en splits</li>
<li>het produceren van een samenvatting</li>
</ol>
<p>De samenvatting van de gelijktijdigheidsanalyse kan op allerlei manieren plaatsvinden. Wij kiezen er in onderstaand voorbeeld voor om een tabel te produceren met de “gelijktijdige” splits (splits met twee of meer stops).</p>
</section>
<section id="voorbeeld-in-tabelvorm" class="level2">
<h2 class="anchored" data-anchor-id="voorbeeld-in-tabelvorm">Voorbeeld in tabelvorm</h2>
<p>Voordat we het voorbeeld uitwerken met R, laten we eerst schematisch zien hoe input en resultaat er in tabelvorm uitzien.</p>
<p>We beginnen met een tabel met stops:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tabel%20stops%20kaal.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Tabel 1: input</figcaption>
</figure>
</div>
<p>Vervolgens identificeren we episodes en splits. Dit leidt tot het volgende resultaat. Merk op dat de <em>splits</em> kolom een geneste structuur heeft:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tabel%20stops%20geannoteerd.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Tabel 2: tussenresultaat</figcaption>
</figure>
</div>
<p>Tot slot werken we de tabel om naar een die is georganiseerd naar splits. Ook deze tabel heeft een geneste structuur:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tabel%20splits.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Tabel 3: eindresultaat</figcaption>
</figure>
</div>
</section>
</section>
<section id="voorbeeldanalyse" class="level1">
<h1>Voorbeeldanalyse</h1>
<section id="stap-1-voorbereiding" class="level2">
<h2 class="anchored" data-anchor-id="stap-1-voorbereiding">Stap 1: voorbereiding</h2>
<p>Allereerst laden we de packages van de Tidyverse:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(conflicted)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">"filter"</span>, <span class="st">"dplyr"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">"lag"</span>, <span class="st">"dplyr"</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ik kies er hier bewust voor om de <code>ivs</code> package niet te importeren in de globale namespace, maar om alle functies uit deze package hieronder aan te roepen met <code>ivs::iv_[functie]</code>. Zo is in een oogopslag te zien welke plekken van de analyse het <code>ivs</code> package wordt ingezet.</p>
<p>Vervolgens definiëren we onze voorbeelddataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>stops <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>   <span class="sc">~</span> organisatie,    <span class="sc">~</span> vanaf,      <span class="sc">~</span> tot,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ziekenhuis A"</span>, <span class="st">"13:00:00"</span>, <span class="st">"15:30:00"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ziekenhuis B"</span>, <span class="st">"13:30:00"</span>, <span class="st">"15:30:00"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ziekenhuis C"</span>, <span class="st">"14:00:00"</span>, <span class="st">"16:00:00"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ziekenhuis C"</span>, <span class="st">"16:30:00"</span>, <span class="st">"18:30:00"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ziekenhuis B"</span>, <span class="st">"17:00:00"</span>, <span class="st">"18:30:00"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>stops <span class="ot">&lt;-</span> stops <span class="sc">|&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(vanaf<span class="sc">:</span>tot, hms<span class="sc">::</span>as_hms))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ik heb er in dit voorbeeld voor gekozen om alle stops te laten plaatsvinden in hetzelfde etmaal. Tijdstippen binnen hetzelfde etmaal kunnen in R gerepresenteerd worden met het <code>hms</code> datatype uit het <code>hms</code> package. In een “echte” analyse van presentatiestops uit LPZ zouden we niet alleen werken met het tijdstip van een stop, maar ook met de datum.</p>
</section>
<section id="stap-2-intervallen-definiëren" class="level2">
<h2 class="anchored" data-anchor-id="stap-2-intervallen-definiëren">Stap 2: intervallen definiëren</h2>
<p>De eerste stap van de analyse is om de starttijd en eindtijd van de stop om te zetten naar een half-open interval <code>[vanaf, tot)</code> met behulp van het <code>ivs</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>stops <span class="ot">&lt;-</span> stops <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stop =</span> ivs<span class="sc">::</span><span class="fu">iv</span>(vanaf, tot)) <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(organisatie, stop)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>stops</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  organisatie                  stop
  &lt;chr&gt;                  &lt;iv&lt;time&gt;&gt;
1 Ziekenhuis A [13:00:00, 15:30:00)
2 Ziekenhuis B [13:30:00, 15:30:00)
3 Ziekenhuis C [14:00:00, 16:00:00)
4 Ziekenhuis C [16:30:00, 18:30:00)
5 Ziekenhuis B [17:00:00, 18:30:00)</code></pre>
</div>
</div>
</section>
<section id="stap-3-identificeren-van-episodes-en-splits" class="level2">
<h2 class="anchored" data-anchor-id="stap-3-identificeren-van-episodes-en-splits">Stap 3: identificeren van episodes en splits</h2>
<p>Vervolgens is het heel eenvoudig om met <code>ivs</code> de episodes en splits te identificeren:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>stops <span class="ot">&lt;-</span> stops <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">episode =</span> ivs<span class="sc">::</span><span class="fu">iv_identify_group</span>(stop),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">splits =</span> ivs<span class="sc">::</span><span class="fu">iv_identify_splits</span>(stop)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>stops</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  organisatie                  stop              episode           splits
  &lt;chr&gt;                  &lt;iv&lt;time&gt;&gt;           &lt;iv&lt;time&gt;&gt; &lt;list&lt;iv&lt;time&gt;&gt;&gt;
1 Ziekenhuis A [13:00:00, 15:30:00) [13:00:00, 16:00:00)              [3]
2 Ziekenhuis B [13:30:00, 15:30:00) [13:00:00, 16:00:00)              [2]
3 Ziekenhuis C [14:00:00, 16:00:00) [13:00:00, 16:00:00)              [2]
4 Ziekenhuis C [16:30:00, 18:30:00) [16:30:00, 18:30:00)              [2]
5 Ziekenhuis B [17:00:00, 18:30:00) [16:30:00, 18:30:00)              [1]</code></pre>
</div>
</div>
<p>Deze tabel heeft de vorm van tabel 2 uit de inleiding.</p>
</section>
<section id="stap-4-converteren-naar-een-tabel-op-basis-van-splits" class="level2">
<h2 class="anchored" data-anchor-id="stap-4-converteren-naar-een-tabel-op-basis-van-splits">Stap 4: converteren naar een tabel op basis van splits</h2>
<p>Het resultaat hierboven is een geneste tabel, met voor iedere stop een lijst met splits waarin deze stop participeert. Maar om te bepalen op welke momenten er gelijktijdige stops plaatsvinden, moeten we naar een tabel die is georganiseerd naar splits. Dit gaat als volgt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> stops <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(splits) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">split =</span> splits) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">.by =</span> split, <span class="at">.key =</span> <span class="st">"split_data"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>splits</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
                 split split_data      
            &lt;iv&lt;time&gt;&gt; &lt;list&gt;          
1 [13:00:00, 13:30:00) &lt;tibble [1 × 3]&gt;
2 [13:30:00, 14:00:00) &lt;tibble [2 × 3]&gt;
3 [14:00:00, 15:30:00) &lt;tibble [3 × 3]&gt;
4 [15:30:00, 16:00:00) &lt;tibble [1 × 3]&gt;
5 [16:30:00, 17:00:00) &lt;tibble [1 × 3]&gt;
6 [17:00:00, 18:30:00) &lt;tibble [2 × 3]&gt;</code></pre>
</div>
</div>
<p>Deze tabel heeft de vorm van tabel 3 uit de inleiding.</p>
</section>
<section id="stap-5-inzoomen-op-gelijktijdige-splits" class="level2">
<h2 class="anchored" data-anchor-id="stap-5-inzoomen-op-gelijktijdige-splits">Stap 5: inzoomen op gelijktijdige splits</h2>
<p>We kunnen nu inzoomen op alle momenten waarop er bij meer dan één ziekenhuis een stop gaande was. Oftewel alle splits waarbij meer dan één ziekenhuis is betrokken:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>gelijktijdig <span class="ot">&lt;-</span> splits <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">map_dbl</span>(split_data, nrow) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>gelijktijdig</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
                 split split_data      
            &lt;iv&lt;time&gt;&gt; &lt;list&gt;          
1 [13:30:00, 14:00:00) &lt;tibble [2 × 3]&gt;
2 [14:00:00, 15:30:00) &lt;tibble [3 × 3]&gt;
3 [17:00:00, 18:30:00) &lt;tibble [2 × 3]&gt;</code></pre>
</div>
</div>
</section>
<section id="stap-6-samenvatten-resultaten" class="level2">
<h2 class="anchored" data-anchor-id="stap-6-samenvatten-resultaten">Stap 6: samenvatten resultaten</h2>
<p>Het resultaat hierboven is een geneste tabel, met voor iedere split een subtabel met informatie over de aan de split bijdragende stops. We kunnen dit op allerlei manieren samenvatten, bijvoorbeeld als volgt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>gelijktijdig <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">organisaties =</span> <span class="fu">map_chr</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>      split_data,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      \(df) df <span class="sc">|&gt;</span> <span class="fu">pull</span>(organisatie) <span class="sc">|&gt;</span> <span class="fu">sort</span>() <span class="sc">|&gt;</span> <span class="fu">str_flatten</span>(<span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vanaf =</span> ivs<span class="sc">::</span><span class="fu">iv_start</span>(split),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">tot =</span> ivs<span class="sc">::</span><span class="fu">iv_end</span>(split),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vanaf, tot, organisaties) <span class="sc">|&gt;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gt</span>() <span class="co"># tabel netjes opmaken met het gt package</span></span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="hmhsxadlig" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hmhsxadlig table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hmhsxadlig thead, #hmhsxadlig tbody, #hmhsxadlig tfoot, #hmhsxadlig tr, #hmhsxadlig td, #hmhsxadlig th {
  border-style: none;
}

#hmhsxadlig p {
  margin: 0;
  padding: 0;
}

#hmhsxadlig .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hmhsxadlig .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hmhsxadlig .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hmhsxadlig .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hmhsxadlig .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hmhsxadlig .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hmhsxadlig .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hmhsxadlig .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hmhsxadlig .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hmhsxadlig .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hmhsxadlig .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hmhsxadlig .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hmhsxadlig .gt_spanner_row {
  border-bottom-style: hidden;
}

#hmhsxadlig .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hmhsxadlig .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hmhsxadlig .gt_from_md > :first-child {
  margin-top: 0;
}

#hmhsxadlig .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hmhsxadlig .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hmhsxadlig .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hmhsxadlig .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hmhsxadlig .gt_row_group_first td {
  border-top-width: 2px;
}

#hmhsxadlig .gt_row_group_first th {
  border-top-width: 2px;
}

#hmhsxadlig .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmhsxadlig .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hmhsxadlig .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hmhsxadlig .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hmhsxadlig .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmhsxadlig .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hmhsxadlig .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hmhsxadlig .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hmhsxadlig .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hmhsxadlig .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hmhsxadlig .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmhsxadlig .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hmhsxadlig .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hmhsxadlig .gt_left {
  text-align: left;
}

#hmhsxadlig .gt_center {
  text-align: center;
}

#hmhsxadlig .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hmhsxadlig .gt_font_normal {
  font-weight: normal;
}

#hmhsxadlig .gt_font_bold {
  font-weight: bold;
}

#hmhsxadlig .gt_font_italic {
  font-style: italic;
}

#hmhsxadlig .gt_super {
  font-size: 65%;
}

#hmhsxadlig .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hmhsxadlig .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hmhsxadlig .gt_indent_1 {
  text-indent: 5px;
}

#hmhsxadlig .gt_indent_2 {
  text-indent: 10px;
}

#hmhsxadlig .gt_indent_3 {
  text-indent: 15px;
}

#hmhsxadlig .gt_indent_4 {
  text-indent: 20px;
}

#hmhsxadlig .gt_indent_5 {
  text-indent: 25px;
}

#hmhsxadlig .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hmhsxadlig div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="vanaf" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">vanaf</th>
<th id="tot" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">tot</th>
<th id="organisaties" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">organisaties</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="vanaf">13:30:00</td>
<td class="gt_row gt_center" headers="tot">14:00:00</td>
<td class="gt_row gt_left" headers="organisaties">Ziekenhuis A, Ziekenhuis B</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="vanaf">14:00:00</td>
<td class="gt_row gt_center" headers="tot">15:30:00</td>
<td class="gt_row gt_left" headers="organisaties">Ziekenhuis A, Ziekenhuis B, Ziekenhuis C</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="vanaf">17:00:00</td>
<td class="gt_row gt_center" headers="tot">18:30:00</td>
<td class="gt_row gt_left" headers="organisaties">Ziekenhuis B, Ziekenhuis C</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Gekopieerd!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Gekopieerd!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>